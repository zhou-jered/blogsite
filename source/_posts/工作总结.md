---
title: 2018 年中总结
date: 2018-08-04 00:17:48
tags:
	- Daily
---

## 初到北京
今年2月从LINE离职，结束了在大连两年的生活，想到这里不得不说一句，在大连生活真的是舒服，但是职业发展实在是非常有限，所以还是来到了北京。三天面了6个公司，因为自己工作经验只有两年，本来想去大厂的，找同学内推了几次，都是因为工作年限建立被拒了，加上简历上好像也没有啥亮眼的地方，被拒了了也没啥可说的。在boss上联系了6家公司，面试时间被安排在三天内，每天早上下午各一场，讲道理，面试也是有套路的，不过这个套路也是我在面试第一天之后才领悟出来的。第一天面的莫名其妙之后，后面的就几家就比较顺利了，印象比较深刻的有三家公司：公司A，十分过分的问我进程和线程的区别；另外一家新橙科技，在一家博物馆里，做律所软件iCourt的，面试官给我感觉都挺不错的，约我来面试的面试官我也听喜欢他的，很随和。面试过程问得挺多的，sql是我软肋，被问出来了有点挫2333。最后hr面的时候，4A 腔，说话不明说，很蛋疼。我要薪水高了，你直接跟我说你技术水平达不到不就可以了，hr硬是绕大个圈子，好几句话把这个意思表达出来。最后还是没去，去了VIPKID，也就是我现在的公司。还是看中业务了吧，VIPKID做在线教育。其实iCourt也很不错的，主要是hr给我印象不太好，VIPKID的hr明显更接地气一点。也不知道iCourt 最近发展的怎样了，应该还不错吧。祝福下。

VIPKID发展到现在差不多快一万人了，不过感觉还是个草台班子，基础设施跟我在LINE的时候完全没法比，不过也可以理解，vk技术人员一千人不到。vk的测试和运维存在感很严重，服务器是测试和运维在管着，我们开发就只有登录看日志的权限，而且开发服务器的数量还很少，各个部门之间共享服务器环境，想要部署测试的时候，需要去跟测试协调服务器使用问题，这个问题让我一直蛋疼到现在。真的蛋疼，非常蛋疼，十分蛋疼。主要是我在LINE的时候，LINE有自己的云，服务器随便用的，想要多少有多少，向怎么折腾怎么折腾，甚至我还试了一把 sudo rm -rf / ， 服务器坏了forece stop 再销毁就OK了。在对比我现在在vk，都是泪，上次测试环境数据库想要加个索引，我屁颠屁颠连上数据库执行sql，发现没有权限，找运维，运维说你要加索引，你要问问服务器的负责人，他允许了才能加，然后我就去找人去了，然后别人怕出事担责任，让我发邮件，引入更多的人来确认，一天就过去了。在我看来，这些流程完全没卵用。职场老油条。

在vk工作蛋疼的地方很多，吐槽的地方可以吐三天三夜。不过好的地方也有，大家一起上线到深夜还是很快乐的。总的来说，自己部门内，甚至大部门内的交流沟通还是很顺畅的。

在VIPKID 内部，使用的是为服务架构，但是怎么说的呢，这个微服务架构用的不伦不类的，首先我们的微服务架构没有任何指导思想和实践原则，服务拆分只是做到业务层面的拆分，在技术上的拆分还是没有体现出微服务的任何优势出来。在具体的技术实践上面，大部门将业务拆分给小组之后，小组做完业务功能之后，给自己的服务搞个内网域名，然后再申请几台服务器，让运维在前面搞个Nginx做负载均衡，之后调用方还是通过传统的手写Http请求通过域名的方式来调用各个服务。还是比较传统的那套玩法，严格的来说甚至都不叫微服务，我觉得我们公司对于微服务的理解仅限于把业务拆分得足够细就能叫做微服务了。

这样做带来的缺点是显而易见的，首先调用链很长很长很长，根据我的观察，一般调用链平均长度是5层左右，多的7/8层，如果用户请求首先到达的服务称为第一层服务的话，我维护的服务处在用户调用链的第三层，往下调用一些其他服务，响应时间大概50毫秒左右，还能接收，But，基本上所有服务都要依赖的一个核心数据库表服务，在业务高峰期会出现十分恐怖的延时，高达几秒，导致用户响应要么超时，要么十分缓慢
